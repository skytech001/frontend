{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const addItemToCart = createAsyncThunk(\"addToCart/addItemToCart\", async (_ref, _ref2) => {\n  let {\n    id,\n    qty\n  } = _ref;\n  let {\n    getState\n  } = _ref2;\n  const response = await axios.post(\"http://localhost:5000/products/:id\", {\n    id\n  });\n  console.log(response.data);\n  return {\n    name: response.data[0].name,\n    image: response.data[0].image,\n    price: response.data[0].price,\n    countInStock: response.data[0].countInStock,\n    product: response.data[0].id,\n    qty\n  };\n});\nconst addToCartSlice = createSlice({\n  name: \"addToCart\",\n  initialState: {\n    cartItems: []\n  },\n  reducers: {\n    removeItem: (state, _ref3) => {\n      let {\n        payload\n      } = _ref3;\n      const newItems = state.cartItems.filter(item => item.product !== payload);\n      state.cartItems = newItems;\n    }\n  },\n  extraReducers(builder) {\n    builder.addCase(addItemToCart.fulfilled, (state, action) => {\n      const item = action.payload;\n      console.log(state);\n      if (state.cartItems.length > 0) {\n        const newCartItems = state.cartItems.filter(inCartItem => {\n          return inCartItem.product !== item.product;\n        });\n        if (newCartItems.length > 0) {\n          state.cartItems = [...newCartItems, item];\n        } else {\n          state.cartItems = [item];\n        }\n      } else {\n        state.cartItems = [item];\n      }\n    });\n  }\n});\nexport default addToCartSlice.reducer;\nexport const {\n  removeItem\n} = addToCartSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","addItemToCart","id","qty","getState","response","post","console","log","data","name","image","price","countInStock","product","addToCartSlice","initialState","cartItems","reducers","removeItem","state","payload","newItems","filter","item","extraReducers","builder","addCase","fulfilled","action","length","newCartItems","inCartItem","reducer","actions"],"sources":["C:/Users/abiod/Desktop/frontend/src/features/addToCartSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport axios from \"axios\";\r\n\r\nexport const addItemToCart = createAsyncThunk(\r\n  \"addToCart/addItemToCart\",\r\n  async ({ id, qty }, { getState }) => {\r\n    const response = await axios.post(\"http://localhost:5000/products/:id\", {\r\n      id,\r\n    });\r\n    console.log(response.data);\r\n    return {\r\n      name: response.data[0].name,\r\n      image: response.data[0].image,\r\n      price: response.data[0].price,\r\n      countInStock: response.data[0].countInStock,\r\n      product: response.data[0].id,\r\n      qty,\r\n    };\r\n  }\r\n);\r\n\r\nconst addToCartSlice = createSlice({\r\n  name: \"addToCart\",\r\n  initialState: {\r\n    cartItems: [],\r\n  },\r\n  reducers: {\r\n    removeItem: (state, { payload }) => {\r\n      const newItems = state.cartItems.filter(\r\n        (item) => item.product !== payload\r\n      );\r\n      state.cartItems = newItems;\r\n    },\r\n  },\r\n  extraReducers(builder) {\r\n    builder.addCase(addItemToCart.fulfilled, (state, action) => {\r\n      const item = action.payload;\r\n      console.log(state);\r\n      if (state.cartItems.length > 0) {\r\n        const newCartItems = state.cartItems.filter((inCartItem) => {\r\n          return inCartItem.product !== item.product;\r\n        });\r\n\r\n        if (newCartItems.length > 0) {\r\n          state.cartItems = [...newCartItems, item];\r\n        } else {\r\n          state.cartItems = [item];\r\n        }\r\n      } else {\r\n        state.cartItems = [item];\r\n      }\r\n    });\r\n  },\r\n});\r\n\r\nexport default addToCartSlice.reducer;\r\nexport const { removeItem } = addToCartSlice.actions;\r\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAEhE,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,aAAa,GAAGH,gBAAgB,CAC3C,yBAAyB,EACzB,uBAAqC;EAAA,IAA9B;IAAEI,EAAE;IAAEC;EAAI,CAAC;EAAA,IAAE;IAAEC;EAAS,CAAC;EAC9B,MAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,IAAI,CAAC,oCAAoC,EAAE;IACtEJ;EACF,CAAC,CAAC;EACFK,OAAO,CAACC,GAAG,CAACH,QAAQ,CAACI,IAAI,CAAC;EAC1B,OAAO;IACLC,IAAI,EAAEL,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC,CAACC,IAAI;IAC3BC,KAAK,EAAEN,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC,CAACE,KAAK;IAC7BC,KAAK,EAAEP,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC,CAACG,KAAK;IAC7BC,YAAY,EAAER,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC,CAACI,YAAY;IAC3CC,OAAO,EAAET,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC,CAACP,EAAE;IAC5BC;EACF,CAAC;AACH,CAAC,CACF;AAED,MAAMY,cAAc,GAAGhB,WAAW,CAAC;EACjCW,IAAI,EAAE,WAAW;EACjBM,YAAY,EAAE;IACZC,SAAS,EAAE;EACb,CAAC;EACDC,QAAQ,EAAE;IACRC,UAAU,EAAE,CAACC,KAAK,YAAkB;MAAA,IAAhB;QAAEC;MAAQ,CAAC;MAC7B,MAAMC,QAAQ,GAAGF,KAAK,CAACH,SAAS,CAACM,MAAM,CACpCC,IAAI,IAAKA,IAAI,CAACV,OAAO,KAAKO,OAAO,CACnC;MACDD,KAAK,CAACH,SAAS,GAAGK,QAAQ;IAC5B;EACF,CAAC;EACDG,aAAa,CAACC,OAAO,EAAE;IACrBA,OAAO,CAACC,OAAO,CAAC1B,aAAa,CAAC2B,SAAS,EAAE,CAACR,KAAK,EAAES,MAAM,KAAK;MAC1D,MAAML,IAAI,GAAGK,MAAM,CAACR,OAAO;MAC3Bd,OAAO,CAACC,GAAG,CAACY,KAAK,CAAC;MAClB,IAAIA,KAAK,CAACH,SAAS,CAACa,MAAM,GAAG,CAAC,EAAE;QAC9B,MAAMC,YAAY,GAAGX,KAAK,CAACH,SAAS,CAACM,MAAM,CAAES,UAAU,IAAK;UAC1D,OAAOA,UAAU,CAAClB,OAAO,KAAKU,IAAI,CAACV,OAAO;QAC5C,CAAC,CAAC;QAEF,IAAIiB,YAAY,CAACD,MAAM,GAAG,CAAC,EAAE;UAC3BV,KAAK,CAACH,SAAS,GAAG,CAAC,GAAGc,YAAY,EAAEP,IAAI,CAAC;QAC3C,CAAC,MAAM;UACLJ,KAAK,CAACH,SAAS,GAAG,CAACO,IAAI,CAAC;QAC1B;MACF,CAAC,MAAM;QACLJ,KAAK,CAACH,SAAS,GAAG,CAACO,IAAI,CAAC;MAC1B;IACF,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AAEF,eAAeT,cAAc,CAACkB,OAAO;AACrC,OAAO,MAAM;EAAEd;AAAW,CAAC,GAAGJ,cAAc,CAACmB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}